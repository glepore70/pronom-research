;P3D 2.1
(load "p3d.lsp")
(defun vtx (x y z) (make-vertex :x x :y y :z z))
(setq model (def-gob :children 
	      (list
	       (def-gob :attr (list (cons 'color blue))
		 :children (list
			    (polygon
			     (vtx 1.0 -1.0 0.0)
			     (vtx 1.0 1.0 0.0)
			     (vtx -1.0 1.0 0.0)
			     (vtx -1.0 -1.0 0.0))
			    (polygon
			     (vtx 1.0 -1.0 2.0)
			     (vtx 1.0 1.0 2.0)
			     (vtx -1.0 1.0 2.0)
			     (vtx -1.0 -1.0 2.0))))
	       (triangle
		(vtx 0.000000 1.000000 0.000000)
		(vtx 0.000000 -1.000000 0.000000)
		(vtx 0.214970 0.976621 0.068966)
		(vtx -0.214970 -0.976621 0.068966)
		(vtx 0.419889 0.907575 0.137931)
		(vtx -0.419889 -0.907575 0.137931)
		(vtx 0.605174 0.796093 0.206897)
		(vtx -0.605174 -0.796093 0.206897)
		(vtx 0.762162 0.647386 0.275862)
		(vtx -0.762162 -0.647386 0.275862)
		(vtx 0.883512 0.468409 0.344828)
		(vtx -0.883512 -0.468409 0.344828)
		(vtx 0.963550 0.267528 0.413793)
		(vtx -0.963550 -0.267528 0.413793)
		(vtx 0.998533 0.054139 0.482759)
		(vtx -0.998533 -0.054139 0.482759)
		(vtx 0.986827 -0.161782 0.551724)
		(vtx -0.986827 0.161782 0.551724)
		(vtx 0.928977 -0.370138 0.620690)
		(vtx -0.928977 0.370138 0.620690)
		(vtx 0.827689 -0.561187 0.689655)
		(vtx -0.827689 0.561187 0.689655)
		(vtx 0.687700 -0.725995 0.758621)
		(vtx -0.687700 0.725995 0.758621)
		(vtx 0.515554 -0.856857 0.827586)
		(vtx -0.515554 0.856857 0.827586)
		(vtx 0.319302 -0.947653 0.896552)
		(vtx -0.319302 0.947653 0.896552)
		(vtx 0.108120 -0.994138 0.965517)
		(vtx -0.108120 0.994138 0.965517)
		(vtx -0.108118 -0.994138 1.034483)
		(vtx 0.108118 0.994138 1.034483)
		(vtx -0.319301 -0.947653 1.103448)
		(vtx 0.319301 0.947653 1.103448)
		(vtx -0.515553 -0.856858 1.172414)
		(vtx 0.515553 0.856858 1.172414)
		(vtx -0.687699 -0.725996 1.241379)
		(vtx 0.687699 0.725996 1.241379)
		(vtx -0.827688 -0.561188 1.310345)
		(vtx 0.827688 0.561188 1.310345)
		(vtx -0.928976 -0.370139 1.379310)
		(vtx 0.928976 0.370139 1.379310)
		(vtx -0.986826 -0.161783 1.448276)
		(vtx 0.986826 0.161783 1.448276)
		(vtx -0.998533 0.054137 1.517241)
		(vtx 0.998533 -0.054137 1.517241)
		(vtx -0.963550 0.267527 1.586207)
		(vtx 0.963550 -0.267527 1.586207)
		(vtx -0.883513 0.468407 1.655172)
		(vtx 0.883513 -0.468407 1.655172)
		(vtx -0.762163 0.647385 1.724138)
		(vtx 0.762163 -0.647385 1.724138)
		(vtx -0.605176 0.796092 1.793103)
		(vtx 0.605176 -0.796092 1.793103)
		(vtx -0.419891 0.907575 1.862069)
		(vtx 0.419891 -0.907575 1.862069)
		(vtx -0.214972 0.976620 1.931034)
		(vtx 0.214972 -0.976620 1.931034)
		(vtx -0.000002 1.000000 2.000000)
		(vtx 0.000002 -1.000000 2.000000)))))

(setq lights
      (def-gob
	:children (list
		   (light (make-point :x 20.0 :y 20.0 :z 0.0)
			  (make-color :r 0.8 :g 0.8 :b 0.8))
		   (ambient (make-color :r 0.4 :g 0.3 :b 0.3)) )))

(setq this-camera (make-camera
		   :lookfrom (make-point :x 5.0 :y 0.0 :z 1.0)
		   :lookat (make-point :x 0.0 :y 0.0 :z 1.0)
		   :fovea 45.0
		   :up y-vec
		   :hither -1.
		   :yon -10.0 ))

(snap model lights this-camera)


